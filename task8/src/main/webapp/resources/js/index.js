var adList = [
    {
        id: '1',
        description: 'Bag number 1, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'20%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '2',
        description: 'Bag number 2, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'30%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '3',
        description: 'Bag number 3, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        rating:'15%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '4',
        description: 'Bag number 4, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'20%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '5',
        description: 'Bag number 5, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'30%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '6',
        description: 'Bag number 6, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'10%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '7',
        description: 'Bag number 7, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: '',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'20%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '8',
        description: 'Bag number 8, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'10%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '9',
        description: 'Bag number 9, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'15%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '10',
        description: 'Bag number 10, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'30%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '11',
        description: 'Bag number 11, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'10%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '12',
        description: 'Bag number 12, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'20%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '13',
        description: 'Bag number 13, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'30%',
        hashTags: []
    },
    {
        id: '14',
        description: 'Bag number 14, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'40%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '15',
        description: 'Bag number 15, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'20%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '16',
        description: 'Bag number 16, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'10%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '17',
        description: 'Bag number 17, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'20%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '18',
        description: 'Bag number 18, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'10%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '19',
        description: 'Bag number 19, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'30%',
        hashTags: ['#bag', '#Dior']
    },
    {
        id: '20',
        description: 'Bag number 20, vintage, Italian quality',
        createdAt: new Date('2021-01-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-11-17T23:00:00'),
        discount:'15%',
        hashTags: ['#bag', '#Dior']
    },
];

function getAd(id) {
    if (typeof id == "string" && id.valueOf() > 0) {
        return adList.find((item) => item.id == id);
    }
    return "incorrect input";
}


function validateAd(item) {
    if (!item) {
        return false;
    }
    if (item.id === "" || typeof item.id !== "string")
        return false;

    if (item.description === "" || typeof item.description !== "string" || item.description.length > 200)
        return false;

    if (item.link === "" || typeof item.link !== "string")
        return false;

    if (item.discount === "" || typeof item.discount !== "string")
        return false;

    if (item.vendor === "" || typeof item.vendor !== "string")
        return false;

    if (item.createdAt instanceof Date || item.createdAt !== "")
        return true;

    if (item.validUntil instanceof Date || item.validUntil !== "")
        return true;

    if (item.hashTags.length == 0) {
        return true;
    } else
        for (let i = 0; i < item.hashTags.length; i++) {
            if (!(item.hashTags[i].substring(0, 1) === '#')) {
                return false;
            }
        }
    return true;
}


    function getAds(skip, top, filterConfig) {
        let result;
        if (!filterConfig) {
            result = adList;
        }

        if (filterConfig) {

            if (filterConfig.vendor) {
                result = adList.filter(function (item) {
                        return item.vendor.toLowerCase().indexOf(filterConfig.vendor.toLowerCase()) + 1;
                    }
                );
            }

            if (filterConfig.createdAt) {
                result = adList.filter(function (item) {
                    return item.createdAt >= filterConfig.createdAt;
                });
            }
            if (filterConfig.validUntil) {
                result = adList.filter(function (item) {
                    return item.validUntil.getTime() <= filterConfig.validUntil.getTime();
                });
            }

        }
        return result.sort((function (a, b) {
                return a.createdAt - b.createdAt
            }
        )).slice(skip, skip + top);
    }

    function addAd(item) {
        const date = new Date();
        item.id = +date;
        item.createdAt = new Date();
        if (validateAd(item)) {
            adList.push(item);
            return true;
        }
        return false;
    }



    function editAd(id, adItem) {

    var num = adList.findIndex(item => item.id === id);

    if (adItem.description) {
        adList[num].description = adItem.description;
    }
    if (adItem.link) {
        adList[num].link = adItem.link;
    }
    if (adItem.discount) {
        adList[num].discount = adItem.discount;
    }
    if (adItem.validUntil) {
        adList[num].validUntil = adItem.validUntil;
    }
    if (adItem.hashTags) {
        adList[num].hashTags = adItem.hashTags;
    }
    if (validateAd(adList[num]) === false){
        return false;
    }
    else
        return true;
}


    function removeAd(id) {
        let tmp = adList.slice();
        tmp.splice(tmp.findIndex(item => item.id === id), 1);
        adList = tmp.slice();
        return true;
    }

    console.log(validateAd(adList[5]));//все правильно, выведет true
    console.log(validateAd(adList[8]));//нет знака '#' в тегах, выведет false
    console.log(validateAd(adList[6]));//нет имени вендора, выведет false
    console.log(getAd('5'));//вернет пятыое объявление
    console.log(getAd('22'));//не найдет объявление с таким id, потому что его нет
    console.log(getAds(0, 10));
    console.log(getAds(10, 10));
    console.log(getAds(0, 10, {validUntil: new Date('2021-03-17T23:00:00')}));
    console.log(getAds(0, 10, {vendor: 'Иванов Иван'}));
    console.log(editAd('1', { discount: '20%' }));
    console.log(editAd('4', {description: "aaaaa"}));

    console.log(addAd({
        id: '1',
        description: '',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: '',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'',
        hashTags: ['']
    }));//вернет false, потому что в объявлении нет имени вендора

    console.log(addAd({
        id: '1',
        description: 'Bag number 1, vintage, Italian quality',
        createdAt: new Date('2021-03-17T23:00:00'),
        link: 'https://www.dior.com/en_int/products/couture-M0565OJAP_M885-medium-lady-d-lite-bag-yellow-multicolor-dior-paisley-embroidery',
        vendor: 'Paseko Nadia',
        validUntil:new Date('2021-10-17T23:00:00'),
        discount:'20%',
        hashTags: ['']
    }));// вернет true, объявление добавилось

    console.log(getAd('7'));// вернет объявление
    console.log(removeAd('7'));// вернет удаляемое объявление
    console.log(getAd('7'));// не вернет, потому что удалили

